{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst inputData = document.querySelector('input#datetime-picker');\nconst btnStart = document.querySelector('button[data-start]');\nconst dataDays = document.querySelector('span[data-days]');\nconst dataHours = document.querySelector('span[data-hours]');\nconst dataMinutes = document.querySelector('span[data-minutes]');\nconst dataSeconds = document.querySelector('span[data-seconds]');\n\nlet userSelectedDate;\nlet countdownInterval;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    console.log(userSelectedDate.getTime());\n    if (userSelectedDate.getTime() < options.defaultDate.getTime()) {\n      btnStart.disabled = true;\n      iziToast.error({\n        message: 'Please choose a date in the future',\n      });\n    } else {\n      btnStart.disabled = false;\n    }\n  },\n};\n\nbtnStart.addEventListener('click', () => {\n  if (countdownInterval) {\n    clearInterval(countdownInterval);\n  }\n  const countdownDate = new Date(userSelectedDate);\n  updateTimer(countdownDate);\n  countdownInterval = setInterval(() => {\n    updateTimer(countdownDate);\n  }, 1000);\n  inputData.disabled = true;\n  btnStart.disabled = true;\n});\n\nfunction updateTimer(countdownDate) {\n  const now = new Date();\n  const distance = countdownDate.getTime() - now.getTime();\n\n  if (distance < 0) {\n    clearInterval(countdownInterval);\n    dataDays.textContent = '00';\n    dataHours.textContent = '00';\n    dataMinutes.textContent = '00';\n    dataSeconds.textContent = '00';\n    iziToast.success({\n      message: 'Time is up!',\n    });\n    inputData.disabled = false;\n    btnStart.disabled = true;\n    return;\n  }\n\n  const { days, hours, minutes, seconds } = convertMs(distance);\n  dataDays.textContent = String(days).padStart(2, '0');\n  dataHours.textContent = String(hours).padStart(2, '0');\n  dataMinutes.textContent = String(minutes).padStart(2, '0');\n  dataSeconds.textContent = String(seconds).padStart(2, '0');\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor((ms % hour) / minute);\n  const seconds = Math.floor((ms % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nflatpickr('input#datetime-picker', options);\n"],"names":["inputData","btnStart","dataDays","dataHours","dataMinutes","dataSeconds","userSelectedDate","countdownInterval","options","selectedDates","iziToast","countdownDate","updateTimer","now","distance","days","hours","minutes","seconds","convertMs","ms","flatpickr"],"mappings":"2GAKA,MAAMA,EAAY,SAAS,cAAc,uBAAuB,EAC1DC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAW,SAAS,cAAc,iBAAiB,EACnDC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAc,SAAS,cAAc,oBAAoB,EAE/D,IAAIC,EACAC,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBH,EAAmBG,EAAc,CAAC,EAClC,QAAQ,IAAIH,EAAiB,QAAS,CAAA,EAClCA,EAAiB,QAAS,EAAGE,EAAQ,YAAY,QAAO,GAC1DP,EAAS,SAAW,GACpBS,EAAS,MAAM,CACb,QAAS,oCACjB,CAAO,GAEDT,EAAS,SAAW,EAEvB,CACH,EAEAA,EAAS,iBAAiB,QAAS,IAAM,CACnCM,GACF,cAAcA,CAAiB,EAEjC,MAAMI,EAAgB,IAAI,KAAKL,CAAgB,EAC/CM,EAAYD,CAAa,EACzBJ,EAAoB,YAAY,IAAM,CACpCK,EAAYD,CAAa,CAC1B,EAAE,GAAI,EACPX,EAAU,SAAW,GACrBC,EAAS,SAAW,EACtB,CAAC,EAED,SAASW,EAAYD,EAAe,CAClC,MAAME,EAAM,IAAI,KACVC,EAAWH,EAAc,QAAS,EAAGE,EAAI,QAAO,EAEtD,GAAIC,EAAW,EAAG,CAChB,cAAcP,CAAiB,EAC/BL,EAAS,YAAc,KACvBC,EAAU,YAAc,KACxBC,EAAY,YAAc,KAC1BC,EAAY,YAAc,KAC1BK,EAAS,QAAQ,CACf,QAAS,aACf,CAAK,EACDV,EAAU,SAAW,GACrBC,EAAS,SAAW,GACpB,MACD,CAED,KAAM,CAAE,KAAAc,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAQ,EAC5DZ,EAAS,YAAc,OAAOa,CAAI,EAAE,SAAS,EAAG,GAAG,EACnDZ,EAAU,YAAc,OAAOa,CAAK,EAAE,SAAS,EAAG,GAAG,EACrDZ,EAAY,YAAc,OAAOa,CAAO,EAAE,SAAS,EAAG,GAAG,EACzDZ,EAAY,YAAc,OAAOa,CAAO,EAAE,SAAS,EAAG,GAAG,CAC3D,CAEA,SAASC,EAAUC,EAAI,CAMrB,MAAML,EAAO,KAAK,MAAMK,EAAK,KAAG,EAC1BJ,EAAQ,KAAK,MAAOI,EAAK,MAAO,IAAI,EACpCH,EAAU,KAAK,MAAOG,EAAK,KAAQ,GAAM,EACzCF,EAAU,KAAK,MAAOE,EAAK,IAAU,GAAM,EAEjD,MAAO,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEAG,EAAU,wBAAyBb,CAAO"}